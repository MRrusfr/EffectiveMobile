<mxfile host="Electron" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/24.7.8 Chrome/128.0.6613.36 Electron/32.0.1 Safari/537.36" version="24.7.8">
  <diagram id="algorithm-flowchart" name="Registration Algorithm">
    <mxGraphModel dx="2298" dy="1153" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="2200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" value="&lt;b&gt;Алгоритм регистрации пользователя&lt;/b&gt;&lt;br&gt;POST /Account/v1/User" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;fontSize=18;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="300" y="20" width="500" height="50" as="geometry" />
        </mxCell>
        <mxCell id="start" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#2D7600;strokeColor=#2D7600;fontColor=#ffffff;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="520" y="90" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="startLabel" value="Start" style="text;html=1;align=center;verticalAlign=middle;fontSize=11;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="570" y="95" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="step1" value="Получить POST запрос&lt;br&gt;&lt;i&gt;/Account/v1/User&lt;/i&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="430" y="160" width="220" height="50" as="geometry" />
        </mxCell>
        <mxCell id="e_start_step1" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="start" target="step1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="step2" value="Проверить наличие&lt;br&gt;обязательных полей&lt;br&gt;&lt;i&gt;(firstName, lastName, userName,&lt;br&gt;password, captchaToken)&lt;/i&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="410" y="240" width="260" height="70" as="geometry" />
        </mxCell>
        <mxCell id="e_step1_step2" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="step1" target="step2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dec1" value="Все поля&lt;br&gt;заполнены?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="480" y="340" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="e_step2_dec1" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="step2" target="dec1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="err1" value="&lt;b&gt;400 Bad Request&lt;/b&gt;&lt;br&gt;Код: 1100&lt;br&gt;&quot;Missing required fields.&quot;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="710" y="340" width="220" height="55" as="geometry" />
        </mxCell>
        <mxCell id="e_dec1_err1" value="Нет" style="edgeStyle=orthogonalEdgeStyle;fontStyle=1;fontSize=11;fontColor=#b85450;" parent="1" source="dec1" target="err1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="endErr1" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#b85450;strokeColor=#b85450;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="975" y="352" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="e_err1_end" style="edgeStyle=orthogonalEdgeStyle;strokeColor=#b85450;" parent="1" source="err1" target="endErr1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="step3" value="Валидация форматов полей&lt;br&gt;&lt;i&gt;(длина 1-100 символов,&lt;br&gt;допустимые символы)&lt;/i&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="420" y="455" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="e_dec1_step3" value="Да" style="edgeStyle=orthogonalEdgeStyle;fontStyle=1;fontSize=11;fontColor=#82b366;" parent="1" source="dec1" target="step3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dec2" value="Формат&lt;br&gt;корректный?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="480" y="545" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="e_step3_dec2" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="step3" target="dec2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="err2" value="&lt;b&gt;400 Bad Request&lt;/b&gt;&lt;br&gt;Код: 1101&lt;br&gt;&quot;Invalid field format.&quot;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="710" y="548" width="220" height="55" as="geometry" />
        </mxCell>
        <mxCell id="e_dec2_err2" value="Нет" style="edgeStyle=orthogonalEdgeStyle;fontStyle=1;fontSize=11;fontColor=#b85450;" parent="1" source="dec2" target="err2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="endErr2" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#b85450;strokeColor=#b85450;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="975" y="560" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="e_err2_end" style="edgeStyle=orthogonalEdgeStyle;strokeColor=#b85450;" parent="1" source="err2" target="endErr2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="step4" value="Валидация пароля&lt;br&gt;&lt;i&gt;(8+ символов, не-алфавитно-цифровой,&lt;br&gt;заглавная, строчная, цифра, спецсимвол)&lt;/i&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="410" y="660" width="260" height="65" as="geometry" />
        </mxCell>
        <mxCell id="e_dec2_step4" value="Да" style="edgeStyle=orthogonalEdgeStyle;fontStyle=1;fontSize=11;fontColor=#82b366;" parent="1" source="dec2" target="step4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dec3" value="Пароль&lt;br&gt;валидный?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="480" y="760" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="e_step4_dec3" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="step4" target="dec3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="err3" value="&lt;b&gt;400 Bad Request&lt;/b&gt;&lt;br&gt;Код: 1300&lt;br&gt;&lt;i&gt;&quot;Passwords must have at least one&lt;br&gt;non alphanumeric character, one digit&lt;br&gt;(&#39;0&#39;-&#39;9&#39;), one uppercase (&#39;A&#39;-&#39;Z&#39;),&lt;br&gt;one lowercase (&#39;a&#39;-&#39;z&#39;), one special&lt;br&gt;character and Password must be&lt;br&gt;eight characters or longer.&quot;&lt;/i&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="690" y="740" width="260" height="115" as="geometry" />
        </mxCell>
        <mxCell id="e_dec3_err3" value="Нет" style="edgeStyle=orthogonalEdgeStyle;fontStyle=1;fontSize=11;fontColor=#b85450;" parent="1" source="dec3" target="err3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="endErr3" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#b85450;strokeColor=#b85450;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="995" y="782" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="e_err3_end" style="edgeStyle=orthogonalEdgeStyle;strokeColor=#b85450;" parent="1" source="err3" target="endErr3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="step5" value="Верификация reCAPTCHA&lt;br&gt;&lt;i&gt;(запрос к Google reCAPTCHA API)&lt;/i&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="420" y="885" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="e_dec3_step5" value="Да" style="edgeStyle=orthogonalEdgeStyle;fontStyle=1;fontSize=11;fontColor=#82b366;" parent="1" source="dec3" target="step5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="extNote1" value="External API Call:&lt;br&gt;Google reCAPTCHA" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;size=15;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;fontStyle=2;align=left;" parent="1" vertex="1">
          <mxGeometry x="220" y="878" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="e_ext1" style="edgeStyle=orthogonalEdgeStyle;dashed=1;strokeColor=#6c8ebf;" parent="1" source="extNote1" target="step5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dec5a" value="API&lt;br&gt;доступен?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="480" y="968" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="e_step5_dec5a" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="step5" target="dec5a" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="errApi" value="&lt;b&gt;500 Internal Server Error&lt;/b&gt;&lt;br&gt;Код: 1500&lt;br&gt;&quot;Internal Server Error&quot;&lt;br&gt;&lt;i&gt;(reCAPTCHA API недоступен)&lt;/i&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="190" y="972" width="230" height="65" as="geometry" />
        </mxCell>
        <mxCell id="e_dec5a_errApi" value="Нет" style="edgeStyle=orthogonalEdgeStyle;fontStyle=1;fontSize=11;fontColor=#b85450;" parent="1" source="dec5a" target="errApi" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="endErrApi" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#b85450;strokeColor=#b85450;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="120" y="990" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="e_errApi_end" style="edgeStyle=orthogonalEdgeStyle;strokeColor=#b85450;" parent="1" source="errApi" target="endErrApi" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dec4" value="CAPTCHA&lt;br&gt;валидна?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="480" y="1085" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="e_dec5a_dec4" value="Да" style="edgeStyle=orthogonalEdgeStyle;fontStyle=1;fontSize=11;fontColor=#82b366;" parent="1" source="dec5a" target="dec4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="err4" value="&lt;b&gt;400 Bad Request&lt;/b&gt;&lt;br&gt;Код: 1200&lt;br&gt;&quot;Please verify reCaptcha&lt;br&gt;to register.&quot;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="710" y="1085" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="e_dec4_err4" value="Нет" style="edgeStyle=orthogonalEdgeStyle;fontStyle=1;fontSize=11;fontColor=#b85450;" parent="1" source="dec4" target="err4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="endErr4" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#b85450;strokeColor=#b85450;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="975" y="1100" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="e_err4_end" style="edgeStyle=orthogonalEdgeStyle;strokeColor=#b85450;" parent="1" source="err4" target="endErr4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="step6" value="Проверить userName&lt;br&gt;в базе данных (транзакция)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="430" y="1205" width="220" height="50" as="geometry" />
        </mxCell>
        <mxCell id="e_dec4_step6" value="Да" style="edgeStyle=orthogonalEdgeStyle;fontStyle=1;fontSize=11;fontColor=#82b366;" parent="1" source="dec4" target="step6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dbNote1" value="Database&lt;br&gt;SELECT" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=10;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="260" y="1198" width="80" height="55" as="geometry" />
        </mxCell>
        <mxCell id="e_db1" style="edgeStyle=orthogonalEdgeStyle;dashed=1;strokeColor=#9673a6;" parent="1" source="dbNote1" target="step6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dec5" value="Пользователь&lt;br&gt;существует?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="475" y="1290" width="130" height="80" as="geometry" />
        </mxCell>
        <mxCell id="e_step6_dec5" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="step6" target="dec5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="err5" value="&lt;b&gt;409 Conflict&lt;/b&gt;&lt;br&gt;Код: 1204&lt;br&gt;&quot;User exists!&quot;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="710" y="1296" width="220" height="55" as="geometry" />
        </mxCell>
        <mxCell id="e_dec5_err5" value="Да" style="edgeStyle=orthogonalEdgeStyle;fontStyle=1;fontSize=11;fontColor=#b85450;" parent="1" source="dec5" target="err5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="endErr5" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#b85450;strokeColor=#b85450;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="975" y="1308" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="e_err5_end" style="edgeStyle=orthogonalEdgeStyle;strokeColor=#b85450;" parent="1" source="err5" target="endErr5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="step7" value="Хэшировать пароль&lt;br&gt;&lt;i&gt;(bcrypt)&lt;/i&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="440" y="1415" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="e_dec5_step7" value="Нет" style="edgeStyle=orthogonalEdgeStyle;fontStyle=1;fontSize=11;fontColor=#82b366;" parent="1" source="dec5" target="step7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="step8" value="Создать запись пользователя&lt;br&gt;в базе данных&lt;br&gt;&lt;i&gt;(userID = UUID, books = [])&lt;/i&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="410" y="1500" width="260" height="65" as="geometry" />
        </mxCell>
        <mxCell id="e_step7_step8" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="step7" target="step8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dbNote2" value="Database&lt;br&gt;INSERT" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=10;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="260" y="1502" width="80" height="55" as="geometry" />
        </mxCell>
        <mxCell id="e_db2" style="edgeStyle=orthogonalEdgeStyle;dashed=1;strokeColor=#9673a6;" parent="1" source="dbNote2" target="step8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dec8" value="INSERT&lt;br&gt;успешен?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="480" y="1600" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="e_step8_dec8" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="step8" target="dec8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="errDb" value="&lt;b&gt;500 Internal Server Error&lt;/b&gt;&lt;br&gt;Код: 1500&lt;br&gt;&quot;Internal Server Error&quot;&lt;br&gt;&lt;i&gt;(ошибка записи в БД, ROLLBACK)&lt;/i&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="700" y="1598" width="240" height="65" as="geometry" />
        </mxCell>
        <mxCell id="e_dec8_errDb" value="Нет" style="edgeStyle=orthogonalEdgeStyle;fontStyle=1;fontSize=11;fontColor=#b85450;" parent="1" source="dec8" target="errDb" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="endErrDb" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#b85450;strokeColor=#b85450;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="985" y="1616" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="e_errDb_end" style="edgeStyle=orthogonalEdgeStyle;strokeColor=#b85450;" parent="1" source="errDb" target="endErrDb" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="step9" value="&lt;b&gt;Вернуть 201 Created&lt;/b&gt;&lt;br&gt;{ userID, username, books: [] }" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="420" y="1720" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="e_dec8_step9" value="Да" style="edgeStyle=orthogonalEdgeStyle;fontStyle=1;fontSize=11;fontColor=#82b366;" parent="1" source="dec8" target="step9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="end" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#2D7600;strokeWidth=3;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="520" y="1810" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="endLabel" value="End" style="text;html=1;align=center;verticalAlign=middle;fontSize=11;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="570" y="1815" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="e_step9_end" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="step9" target="end" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="txNote" value="&lt;b&gt;Примечание:&lt;/b&gt;&lt;br&gt;При ошибке обращения к БД на этапе&lt;br&gt;SELECT (шаг «Проверить userName»)&lt;br&gt;также возвращается 500 (код 1500).&lt;br&gt;Все операции записи выполняются&lt;br&gt;в рамках транзакции (ROLLBACK при сбое)." style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;size=15;fillColor=#FFF9C4;strokeColor=#FFB300;fontSize=10;fontStyle=0;align=left;" parent="1" vertex="1">
          <mxGeometry x="100" y="1500" width="250" height="110" as="geometry" />
        </mxCell>
        <mxCell id="legend" value="&lt;b&gt;Легенда / Legend&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=top;fontSize=13;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="50" y="1900" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="leg1" value="Обработка данных" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="50" y="1935" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="leg2" value="Решение (Gateway)" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="50" y="1975" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="leg3" value="Ошибка (Error)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="50" y="2030" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="leg4" value="Внешний вызов (External)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="50" y="2070" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="leg5" value="Операция с БД (DB)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="50" y="2110" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="legStart" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#2D7600;strokeColor=#2D7600;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="70" y="2155" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legStartLabel" value="Начало процесса (Start)" style="text;html=1;align=left;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="100" y="2150" width="160" height="25" as="geometry" />
        </mxCell>
        <mxCell id="legEnd" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#2D7600;strokeWidth=3;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="70" y="2180" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legEndLabel" value="Успешное завершение (End)" style="text;html=1;align=left;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="100" y="2175" width="170" height="25" as="geometry" />
        </mxCell>
        <mxCell id="legErrEnd" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#b85450;strokeColor=#b85450;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="70" y="2205" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legErrEndLabel" value="Завершение с ошибкой (Error End)" style="text;html=1;align=left;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="100" y="2200" width="200" height="25" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
